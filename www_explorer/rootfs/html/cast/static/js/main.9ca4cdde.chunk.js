(this.webpackJsonpcast=this.webpackJsonpcast||[]).push([[0],{144:function(e,t,n){e.exports=n(353)},149:function(e,t,n){},353:function(e,t,n){"use strict";n.r(t);var l,o=n(0),a=n.n(o),c=n(9),i=n.n(c),r=(n(149),n(139)),s=n(5),u=n(44),h=n(17),f=(n(87),n(88),n(7)),p=n(385),m=n(60),d=[];var g,E=function(){var e=Object(o.useState)([]),t=Object(h.a)(e,2),n=t[0],c=t[1],i=Object(o.useState)([{id:Object(p.a)(),name:"Network Shares",path:"/"}]),r=Object(h.a)(i,2),s=r[0],g=r[1],E=Object(o.useState)(null),y=Object(h.a)(E,2),v=y[0],b=y[1];Object(o.useEffect)((function(){fetch("/ha/players").then((function(e){return e.json()})).then((function(e){(d=e.map((function(e){return{value:e,label:e}}))).length>0&&(console.log(e[0]),b({value:e[0],label:e[0]}))})),l="",fetch("/api/directories").then((function(e){return e.json()})).then((function(e){var t=[];e.map((function(e){var n=e.short;t.push({id:Object(p.a)(),name:n,isDir:!0})})),c(t)}))}),[]);var j=[f.ChonkyActions.ChangeSelection,f.ChonkyActions.OpenParentFolder,{id:f.ChonkyActions.OpenFiles.id},f.ChonkyActions.ToggleSearch,f.ChonkyActions.SortFilesByName,f.ChonkyActions.SortFilesBySize,f.ChonkyActions.SortFilesByDate,f.ChonkyActions.ToggleShowFoldersFirst];return a.a.createElement("div",{className:"App"},a.a.createElement("h2",null,"Choose Media Player"),null!=v&&a.a.createElement(m.a,{defaultValue:v,onChange:b,options:d}),a.a.createElement("h2",null,"Choose Music To Play (or select ",a.a.createElement("a",{href:"/playlists"},"Playlists"),")"),a.a.createElement(f.FileBrowser,{files:n,folderChain:s,onFileAction:function(e,t){if("change_selection"===e.id){if(void 0===t.files[0])return;var n,o=t.files[0];if(n=o.name,o.isDir){n=decodeURIComponent(decodeURIComponent(n)),l=l+"/"+n,console.log("Directory selected: ".concat(n)),console.log("Current Path: ".concat(l));var a,i=[];a=[].concat(Object(u.a)(s),[{id:Object(p.a)(),name:n,path:l}]),console.log("Newfolderchain: ".concat(a)),fetch("/api/directories"+l).then((function(e){return e.json()})).then((function(e){e.map((function(e){var t=e.full,n=e.short;i.push({id:Object(p.a)(),name:n,isDir:!0,url:t})})),fetch("/api/files"+l).then((function(e){return e.json()})).then((function(e){e.map((function(e){var t=e.full,n=e.short;i.push({id:Object(p.a)(),name:n,url:t})})),g(a),c(i)}))}))}else console.log("File selected"),console.log("".concat(t.files[0].url)),console.log("Selected Media player: ".concat(v.value)),fetch("/ha/cast",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({player_entity_id:v.value,url:t.files[0].url})}).then((function(e){return e.text()})).then((function(e){return null}))}else if("open_files"===e.id){var r=t.target.id;console.log(r);var h=s.findIndex((function(e){return e.id===r}));if(-1===h)return;console.log(h),"/"===(l=s[h].path)&&(l=""),console.log(l);var f=s.slice(0,h+1);console.log(f);var m=[];fetch("/api/directories"+l).then((function(e){return e.json()})).then((function(e){if(e.map((function(e){var t=e.full,n=e.short;m.push({id:Object(p.a)(),name:n,isDir:!0,url:t})})),""===l)return g(f),void c(m);fetch("/api/files"+l).then((function(e){return e.json()})).then((function(e){e.map((function(e){var t=e.full,n=e.short;m.push({id:Object(p.a)(),name:n,url:t})})),g(f),c(m)}))}))}console.log(e),console.log(t)},disableDefaultFileActions:!0,fileActions:j},a.a.createElement(f.FileToolbar,null),a.a.createElement(f.FileSearch,null),a.a.createElement(f.FileList,null)))},y=n(384);var v=function(){var e=Object(o.useState)(""),t=Object(h.a)(e,2),n=t[0],l=t[1],c=Object(o.useState)([]),i=Object(h.a)(c,2),r=i[0],s=i[1],d=Object(o.useState)(null),E=Object(h.a)(d,2),v=E[0],b=E[1],j=Object(o.useState)(null),O=Object(h.a)(j,2),C=O[0],S=O[1];Object(o.useEffect)((function(){fetch("/playlists/currentplaylist").then((function(e){return e.text()})).then((function(e){return console.log(e)})),fetch("/playlists/playlists").then((function(e){return e.text()})).then((function(e){return console.log(e)}))}),[]);var A=Object(o.useState)([]),F=Object(h.a)(A,2),k=F[0],T=F[1],w=Object(o.useState)([{id:Object(p.a)(),name:"Network Shares",path:"/"}]),P=Object(h.a)(w,2),D=P[0],N=P[1];Object(o.useEffect)((function(){g="",fetch("/api/directories").then((function(e){return e.json()})).then((function(e){var t=[];e.map((function(e){var n=e.short;t.push({id:Object(p.a)(),name:n,isDir:!0})})),T(t)}))}),[]);var I=[f.ChonkyActions.ChangeSelection,f.ChonkyActions.OpenParentFolder,{id:f.ChonkyActions.OpenFiles.id},f.ChonkyActions.ToggleSearch,f.ChonkyActions.SortFilesByName,f.ChonkyActions.SortFilesBySize,f.ChonkyActions.SortFilesByDate,f.ChonkyActions.ToggleShowFoldersFirst];return a.a.createElement("div",{className:"App"},a.a.createElement("h2",null,"Playlists Page"),a.a.createElement("p",null,a.a.createElement("h2",null,"Create Playlist"),a.a.createElement(y.a,{name:"createplaylist",label:"Create Playlist",variant:"outlined",onChange:function(e){return l(e.target.value)}})," ",a.a.createElement("p",null,a.a.createElement("button",{onClick:function(){console.log("Create playlist"),console.log(n),fetch("/playlists/create/".concat(n)).then((function(e){return e.text()})).then((function(e){"True"===e&&(s([].concat(Object(u.a)(r),[{value:n,label:n}])),b({value:n,label:n}))}))}},"CREATE PLAYLIST"))),a.a.createElement("p",null,a.a.createElement("h2",null,"OR Select Existing Playlist"),a.a.createElement(m.a,{name:"existingplaylists",value:v,onChange:b,options:r})),a.a.createElement("p",null,a.a.createElement("h2",null,"Add Folder to Playlist"),a.a.createElement("p",null,"1. Choose folders from below"),a.a.createElement("p",null,"2. Single click to select, double-click to open folder "),a.a.createElement("p",null,"3. You can select multiple folders at once using shift or ctrl key"),a.a.createElement("p",null,"4. Add selection to playlist. You can do this multiple times. "),a.a.createElement("p",null,"CURRENT PLAYLIST: ",null!=v?v.value:""),a.a.createElement("p",null,"PLAYLIST ITEMS COUNT: 0"),a.a.createElement("p",null,a.a.createElement("a",{href:"#viewplaylist"},"View Playlist")),a.a.createElement("p",null,a.a.createElement("button",{onClick:function(){console.log(C),fetch("/playlists/addfolder",{method:"post",body:JSON.stringify(C),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return console.log(e)}))}},"ADD SELECTION TO PLAYLIST")),a.a.createElement(f.FileBrowser,{files:k,folderChain:D,onFileAction:function(e,t){if("open_files"===e.id){if(console.log("OPEN FILES"),S(null),console.log(t),void 0===t.files[0])return;var n,l=t.files[0];if(n=l.name,l.isDir){n=decodeURIComponent(decodeURIComponent(n)),g=g+"/"+n,console.log("Directory selected: ".concat(n)),console.log("Current Path: ".concat(g));var o,a=[];o=[].concat(Object(u.a)(D),[{id:Object(p.a)(),name:n,path:g}]),console.log("Newfolderchain: ".concat(o)),fetch("/api/directories"+g).then((function(e){return e.json()})).then((function(e){e.map((function(e){var t=e.full,n=e.short;a.push({id:Object(p.a)(),name:n,isDir:!0,url:t})})),fetch("/api/files"+g).then((function(e){return e.json()})).then((function(e){e.map((function(e){var t=e.full,n=e.short;a.push({id:Object(p.a)(),name:n,url:t})})),N(o),T(a)}))}))}else{var c=t.target.id;console.log(c),console.log(t),console.log(D);var i=t.files[0];n=i.name,i.isDir;var r=D.findIndex((function(e){return e.id===c}));if(-1===r)return;console.log(r),"/"===(g=D[r].path)&&(g=""),console.log(g);var s=D.slice(0,r+1);console.log(s);var h=[];fetch("/api/directories"+g).then((function(e){return e.json()})).then((function(e){if(e.map((function(e){var t=e.full,n=e.short;h.push({id:Object(p.a)(),name:n,isDir:!0,url:t})})),""===g)return N(s),void T(h);fetch("/api/files"+g).then((function(e){return e.json()})).then((function(e){e.map((function(e){var t=e.full,n=e.short;h.push({id:Object(p.a)(),name:n,url:t})})),N(s),T(h)}))}))}}else"change_selection"===e.id&&t.files.length>0&&(console.log("CHANGE SELECTED"),S(t.files));console.log(e),console.log(t)},disableDefaultFileActions:!0,fileActions:I},a.a.createElement(f.FileToolbar,null),a.a.createElement(f.FileSearch,null),a.a.createElement(f.FileList,null))),a.a.createElement("p",null,a.a.createElement("h2",{id:"viewplaylist"},"Current Playlist")))};var b=function(){return a.a.createElement(r.a,null,a.a.createElement(s.c,null,a.a.createElement(s.a,{path:"/cast",element:a.a.createElement(E,null)}),a.a.createElement(s.a,{path:"/playlists",element:a.a.createElement(v,null)})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(b,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},87:function(e,t,n){}},[[144,1,2]]]);
//# sourceMappingURL=main.9ca4cdde.chunk.js.map