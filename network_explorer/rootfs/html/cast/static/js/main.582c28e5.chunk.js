(this.webpackJsonpcast=this.webpackJsonpcast||[]).push([[0],{121:function(e,t,n){},188:function(e,t,n){e.exports=n(397)},193:function(e,t,n){},397:function(e,t,n){"use strict";n.r(t);var a,l=n(0),o=n.n(l),c=n(10),r=n.n(c),i=(n(193),n(175)),s=n(8),u=n(73),f=n(19),h=(n(121),n(122),n(13)),m=n(455),p=n(72),d=[];var E,y=function(){var e=Object(l.useState)([]),t=Object(f.a)(e,2),n=t[0],c=t[1],r=Object(l.useState)([{id:Object(m.a)(),name:"Network Shares",path:"/"}]),i=Object(f.a)(r,2),s=i[0],E=i[1],y=Object(l.useState)(null),g=Object(f.a)(y,2),v=g[0],b=g[1];Object(l.useEffect)((function(){fetch("/ha/players").then((function(e){return e.json()})).then((function(e){(d=e.map((function(e){return{value:e,label:e}}))).length>0&&(console.log(e[0]),b({value:e[0],label:e[0]}))})),a="",fetch("/api/directories").then((function(e){return e.json()})).then((function(e){var t=[];e.map((function(e){var n=e.short;t.push({id:Object(m.a)(),name:n,isDir:!0})})),c(t)}))}),[]);var j=[h.ChonkyActions.ChangeSelection,h.ChonkyActions.OpenParentFolder,{id:h.ChonkyActions.OpenFiles.id},h.ChonkyActions.ToggleSearch,h.ChonkyActions.SortFilesByName,h.ChonkyActions.SortFilesBySize,h.ChonkyActions.SortFilesByDate,h.ChonkyActions.ToggleShowFoldersFirst];return o.a.createElement("div",{className:"App"},o.a.createElement("h2",null,"Choose Media Player"),null!=v&&o.a.createElement(p.a,{defaultValue:v,onChange:b,options:d}),o.a.createElement("h2",null,"Choose Music To Play (or select ",o.a.createElement("a",{href:"/playlists"},"Playlists"),")"),o.a.createElement(h.FileBrowser,{files:n,folderChain:s,onFileAction:function(e,t){if("change_selection"===e.id){if(void 0===t.files[0])return;var n,l=t.files[0];if(n=l.name,l.isDir){n=decodeURIComponent(decodeURIComponent(n)),a=a+"/"+n,console.log("Directory selected: ".concat(n)),console.log("Current Path: ".concat(a));var o,r=[];o=[].concat(Object(u.a)(s),[{id:Object(m.a)(),name:n,path:a}]),console.log("Newfolderchain: ".concat(o)),fetch("/api/directories"+a).then((function(e){return e.json()})).then((function(e){e.map((function(e){var t=e.full,n=e.short;r.push({id:Object(m.a)(),name:n,isDir:!0,url:t})})),fetch("/api/files"+a).then((function(e){return e.json()})).then((function(e){e.map((function(e){var t=e.full,n=e.short;r.push({id:Object(m.a)(),name:n,url:t})})),E(o),c(r)}))}))}else console.log("File selected"),console.log("".concat(t.files[0].url)),console.log("Selected Media player: ".concat(v.value)),fetch("/ha/cast",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({player_entity_id:v.value,url:t.files[0].url})}).then((function(e){return e.text()})).then((function(e){return null}))}else if("open_files"===e.id){var i=t.target.id;console.log(i);var f=s.findIndex((function(e){return e.id===i}));if(-1===f)return;console.log(f),"/"===(a=s[f].path)&&(a=""),console.log(a);var h=s.slice(0,f+1);console.log(h);var p=[];fetch("/api/directories"+a).then((function(e){return e.json()})).then((function(e){if(e.map((function(e){var t=e.full,n=e.short;p.push({id:Object(m.a)(),name:n,isDir:!0,url:t})})),""===a)return E(h),void c(p);fetch("/api/files"+a).then((function(e){return e.json()})).then((function(e){e.map((function(e){var t=e.full,n=e.short;p.push({id:Object(m.a)(),name:n,url:t})})),E(h),c(p)}))}))}console.log(e),console.log(t)},disableDefaultFileActions:!0,fileActions:j},o.a.createElement(h.FileToolbar,null),o.a.createElement(h.FileSearch,null),o.a.createElement(h.FileList,null)))},g=n(432),v=n(436),b=n(438),j=n(439),C=n(440),O=n(453),S=n(443),k=n(444),A=n(94),F=n(457),P=n(445),T=n(452),w=n(446),N=n(447),I=n(448),x=n(449),L=n(450),D=n(451),B=n(116),R=n(454),Y=n(441),_=n(170),M=n(437),U=n(31),J=[];var z=function(){var e=Object(l.useState)(null),t=Object(f.a)(e,2),n=t[0],a=t[1],c=Object(l.useState)(""),r=Object(f.a)(c,2),i=r[0],s=r[1],d=Object(l.useState)([]),y=Object(f.a)(d,2),z=y[0],V=y[1],W=Object(l.useState)({value:"",label:""}),G=Object(f.a)(W,2),H=G[0],$=G[1],q=Object(l.useState)(null),K=Object(f.a)(q,2),Q=K[0],X=K[1],Z=Object(l.useState)([]),ee=Object(f.a)(Z,2),te=ee[0],ne=ee[1],ae=Object(l.useState)("1"),le=Object(f.a)(ae,2),oe=le[0],ce=le[1],re=Object(l.useState)(""),ie=Object(f.a)(re,2);ie[0],ie[1],Object(l.useEffect)((function(){var e;fetch("/ha/players").then((function(e){return e.json()})).then((function(e){(J=e.map((function(e){return{value:e,label:e}}))).length>0&&(console.log(e[0]),a({value:e[0],label:e[0]}))})),fetch("/playlists/playlists").then((function(e){return e.json()})).then((function(t){console.log(t),0!==t.length&&(e=t.map((function(e){return{value:e,label:e}})),V(e),fetch("/playlists/currentplaylist").then((function(e){return e.text()})).then((function(t){""===t?(console.log("selection about to change: empty"),console.log(e),$({value:e[0].value,label:e[0].value})):(console.log("selection about to change:"),$({value:t,label:t})),console.log(t)})))}))}),[]),Object(l.useEffect)((function(){console.log("use effect:"),console.log(H),""!==H.value&&"null"!==H.value&&fetch("/playlists/currentplaylist/"+H.value,{method:"post"}).then((function(e){return e.text()})).then((function(e){fetch("/playlists/currentplaylist/files").then((function(e){return e.json()})).then((function(e){ne(e)}))}))}),[H]);var se=Object(l.useState)([]),ue=Object(f.a)(se,2),fe=ue[0],he=ue[1],me=Object(l.useState)([{id:Object(m.a)(),name:"Network Shares",path:"/"}]),pe=Object(f.a)(me,2),de=pe[0],Ee=pe[1];Object(l.useEffect)((function(){E="",fetch("/api/directories").then((function(e){return e.json()})).then((function(e){var t=[];e.map((function(e){var n=e.short;t.push({id:Object(m.a)(),name:n,isDir:!0})})),he(t)}))}),[]);var ye=[h.ChonkyActions.ChangeSelection,h.ChonkyActions.OpenParentFolder,{id:h.ChonkyActions.OpenFiles.id},h.ChonkyActions.ToggleSearch,h.ChonkyActions.SortFilesByName,h.ChonkyActions.SortFilesBySize,h.ChonkyActions.SortFilesByDate,h.ChonkyActions.ToggleShowFoldersFirst];function ge(e){var t,n=e.index,a=e.style;return o.a.createElement(g.a,{button:!0,style:a,key:n},o.a.createElement(v.a,{primary:(t=te[n],t.substring(t.lastIndexOf("/")+1))}))}var ve=function(e){fetch("/playlists/mediaplayer/".concat(n.value,"/").concat(e)).then((function(e){return e.json()})).then((function(e){return console.log(e)}))},be=Object(M.a)((function(e){return{root:{display:"flex"},details:{display:"flex",flexDirection:"column"},content:{flex:"1 0 auto"},cover:{width:151},controls:{display:"flex",alignItems:"center",paddingLeft:e.spacing(1),paddingBottom:e.spacing(1)},playIcon:{height:38,width:38}}}))(),je=Object(U.a)();return o.a.createElement("div",{className:"App",style:{backgroundColor:"#f5f5f5"}},o.a.createElement("h2",null,"Playlists Page"),o.a.createElement("h2",null,"Choose Media Player"),null!=n&&o.a.createElement(p.a,{defaultValue:n,onChange:a,options:J}),o.a.createElement("h2",null,"Current Playlist"),o.a.createElement(p.a,{name:"existingplaylists",value:H,onChange:$,options:z}),o.a.createElement("p",null,"\xa0"),o.a.createElement(b.a,{variant:"contained",color:"secondary",onClick:function(){fetch("/playlists/currentplaylist/delete").then((function(e){return e.text()})).then((function(e){console.log(e),""===e&&ne([]),V(z.filter((function(e){return e!==H}))),$({value:e,label:e})}))}},"DELETE PLAYLIST"),o.a.createElement("p",null,"\xa0"),o.a.createElement(B.a,{value:oe},o.a.createElement(j.a,{position:"static",style:{backgroundColor:"#000000"}},o.a.createElement(R.a,{onChange:function(e,t){console.log(t),console.log(e),ce(t)},"aria-label":"Playlists"},o.a.createElement(C.a,{label:"Create Playlist",value:"1"}),o.a.createElement(C.a,{label:"Add To Playlist",value:"2"}),o.a.createElement(C.a,{label:"View Playlist",value:"3"}))),o.a.createElement(Y.a,{value:"1"},o.a.createElement("p",null,o.a.createElement("h2",null,"Create Playlist"),o.a.createElement(O.a,{name:"createplaylist",label:"Create Playlist",variant:"outlined",onChange:function(e){return s(e.target.value)}}),o.a.createElement("p",null,o.a.createElement(b.a,{variant:"contained",color:"primary",onClick:function(){console.log("Create playlist"),console.log(i),fetch("/playlists/create/".concat(i)).then((function(e){return e.text()})).then((function(e){"True"===e&&(V([].concat(Object(u.a)(z),[{value:i,label:i}])),$({value:i,label:i}),ce("2"))}))}},"CREATE PLAYLIST")))),o.a.createElement(Y.a,{value:"2"},o.a.createElement("p",null,o.a.createElement("h2",null,"Add Folder to Playlist"),o.a.createElement("p",null,"1. Choose folders from below"),o.a.createElement("p",null,"2. Single click to select, double-click to open folder "),o.a.createElement("p",null,"3. You can select multiple folders at once using shift or ctrl key"),o.a.createElement("p",null,"4. Add selection to playlist. You can do this multiple times. ")),o.a.createElement("p",null,"CURRENT PLAYLIST: ",null!=H?H.value:""),o.a.createElement("p",null,"PLAYLIST ITEMS COUNT: ",te.length," "),o.a.createElement("p",null,o.a.createElement(b.a,{variant:"contained",color:"primary",onClick:function(){console.log(Q),fetch("/playlists/addfolder",{method:"post",body:JSON.stringify(Q),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log(e),ne(e)}))}},"ADD SELECTION TO PLAYLIST")),o.a.createElement(h.FileBrowser,{files:fe,folderChain:de,onFileAction:function(e,t){if("open_files"===e.id){if(console.log("OPEN FILES"),X(null),console.log(t),void 0===t.files[0])return;var n,a=t.files[0];if(n=a.name,a.isDir){n=decodeURIComponent(decodeURIComponent(n)),E=E+"/"+n,console.log("Directory selected: ".concat(n)),console.log("Current Path: ".concat(E));var l,o=[];l=[].concat(Object(u.a)(de),[{id:Object(m.a)(),name:n,path:E}]),console.log("Newfolderchain: ".concat(l)),fetch("/api/directories"+E).then((function(e){return e.json()})).then((function(e){e.map((function(e){var t=e.full,n=e.short;o.push({id:Object(m.a)(),name:n,isDir:!0,url:t})})),fetch("/api/files"+E).then((function(e){return e.json()})).then((function(e){e.map((function(e){var t=e.full,n=e.short;o.push({id:Object(m.a)(),name:n,url:t})})),Ee(l),he(o)}))}))}else{var c=t.target.id;console.log(c),console.log(t),console.log(de);var r=t.files[0];n=r.name,r.isDir;var i=de.findIndex((function(e){return e.id===c}));if(-1===i)return;console.log(i),"/"===(E=de[i].path)&&(E=""),console.log(E);var s=de.slice(0,i+1);console.log(s);var f=[];fetch("/api/directories"+E).then((function(e){return e.json()})).then((function(e){if(e.map((function(e){var t=e.full,n=e.short;f.push({id:Object(m.a)(),name:n,isDir:!0,url:t})})),""===E)return Ee(s),void he(f);fetch("/api/files"+E).then((function(e){return e.json()})).then((function(e){e.map((function(e){var t=e.full,n=e.short;f.push({id:Object(m.a)(),name:n,url:t})})),Ee(s),he(f)}))}))}}else"change_selection"===e.id&&t.files.length>0&&(console.log("CHANGE SELECTED"),X(t.files));console.log(e),console.log(t)},disableDefaultFileActions:!0,fileActions:ye},o.a.createElement(h.FileToolbar,null),o.a.createElement(h.FileSearch,null),o.a.createElement(h.FileList,null))),o.a.createElement(Y.a,{value:"3"},o.a.createElement("h2",{id:"viewplaylist"},"Current Playlist"),o.a.createElement(S.a,{className:be.root},o.a.createElement("div",{className:be.details},o.a.createElement(k.a,{className:be.content},o.a.createElement(A.a,{component:"h5",variant:"h5"},null!=H?H.value:""),o.a.createElement(A.a,{variant:"subtitle1",color:"textSecondary"},"Playing:")),o.a.createElement("div",{className:be.controls},o.a.createElement(F.a,{title:"previous"},o.a.createElement(P.a,{onClick:function(){return ve("previous")},"aria-label":"previous"},"rtl"===je.direction?o.a.createElement(w.a,null):o.a.createElement(N.a,null))),o.a.createElement(F.a,{title:"play"},o.a.createElement(P.a,{onClick:function(){return ve("play")},"aria-label":"play/pause"},o.a.createElement(I.a,{className:be.playIcon}))),o.a.createElement(F.a,{title:"stop"},o.a.createElement(P.a,{onClick:function(){return ve("stop")},"aria-label":"stop"},o.a.createElement(x.a,{className:be.playIcon}))),o.a.createElement(F.a,{title:"pause"},o.a.createElement(P.a,{onClick:function(){return ve("pause")},"aria-label":"pause"},o.a.createElement(L.a,{className:be.playIcon}))),o.a.createElement(F.a,{title:"next"},o.a.createElement(P.a,{onClick:function(){return ve("next")},"aria-label":"next"},"rtl"===je.direction?o.a.createElement(N.a,null):o.a.createElement(w.a,null))),o.a.createElement(F.a,{title:"shuffle"},o.a.createElement(P.a,{onClick:function(){return ve("shuffle")},"aria-label":"next"},o.a.createElement(D.a,{className:be.playIcon}))))),o.a.createElement(T.a,{className:be.cover,image:"https://github.com/raspberrypisig/homeassistant-addons/raw/master/network_explorer/cast/public/nocover.jpg",title:"Live from space album cover"})),o.a.createElement("p",null,o.a.createElement("p",null,o.a.createElement(b.a,{variant:"contained",color:"secondary",onClick:function(){console.log("clear playlist"),fetch("/playlists/currentplaylist/clear"),ne([])}},"CLEAR PLAYLIST")),o.a.createElement(_.a,{height:400,width:800,itemSize:46,itemCount:te.length},ge)))))};var V=function(){return o.a.createElement(i.a,null,o.a.createElement(s.c,null,o.a.createElement(s.a,{path:"/cast",element:o.a.createElement(y,null)}),o.a.createElement(s.a,{path:"/playlists",element:o.a.createElement(z,null)})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[188,1,2]]]);
//# sourceMappingURL=main.582c28e5.chunk.js.map