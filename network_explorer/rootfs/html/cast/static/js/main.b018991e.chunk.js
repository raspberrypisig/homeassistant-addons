(this.webpackJsonpcast=this.webpackJsonpcast||[]).push([[0],{105:function(e,t,n){},164:function(e,t,n){e.exports=n(373)},169:function(e,t,n){},373:function(e,t,n){"use strict";n.r(t);var l,o=n(0),a=n.n(o),c=n(9),i=n.n(c),r=(n(169),n(158)),s=n(7),u=n(61),h=n(21),f=(n(105),n(106),n(11)),p=n(411),m=n(79),d=[];var g,y=function(){var e=Object(o.useState)([]),t=Object(h.a)(e,2),n=t[0],c=t[1],i=Object(o.useState)([{id:Object(p.a)(),name:"Network Shares",path:"/"}]),r=Object(h.a)(i,2),s=r[0],g=r[1],y=Object(o.useState)(null),E=Object(h.a)(y,2),b=E[0],v=E[1];Object(o.useEffect)((function(){fetch("/ha/players").then((function(e){return e.json()})).then((function(e){(d=e.map((function(e){return{value:e,label:e}}))).length>0&&(console.log(e[0]),v({value:e[0],label:e[0]}))})),l="",fetch("/api/directories").then((function(e){return e.json()})).then((function(e){var t=[];e.map((function(e){var n=e.short;t.push({id:Object(p.a)(),name:n,isDir:!0})})),c(t)}))}),[]);var j=[f.ChonkyActions.ChangeSelection,f.ChonkyActions.OpenParentFolder,{id:f.ChonkyActions.OpenFiles.id},f.ChonkyActions.ToggleSearch,f.ChonkyActions.SortFilesByName,f.ChonkyActions.SortFilesBySize,f.ChonkyActions.SortFilesByDate,f.ChonkyActions.ToggleShowFoldersFirst];return a.a.createElement("div",{className:"App"},a.a.createElement("h2",null,"Choose Media Player"),null!=b&&a.a.createElement(m.a,{defaultValue:b,onChange:v,options:d}),a.a.createElement("h2",null,"Choose Music To Play (or select ",a.a.createElement("a",{href:"/playlists"},"Playlists"),")"),a.a.createElement(f.FileBrowser,{files:n,folderChain:s,onFileAction:function(e,t){if("change_selection"===e.id){if(void 0===t.files[0])return;var n,o=t.files[0];if(n=o.name,o.isDir){n=decodeURIComponent(decodeURIComponent(n)),l=l+"/"+n,console.log("Directory selected: ".concat(n)),console.log("Current Path: ".concat(l));var a,i=[];a=[].concat(Object(u.a)(s),[{id:Object(p.a)(),name:n,path:l}]),console.log("Newfolderchain: ".concat(a)),fetch("/api/directories"+l).then((function(e){return e.json()})).then((function(e){e.map((function(e){var t=e.full,n=e.short;i.push({id:Object(p.a)(),name:n,isDir:!0,url:t})})),fetch("/api/files"+l).then((function(e){return e.json()})).then((function(e){e.map((function(e){var t=e.full,n=e.short;i.push({id:Object(p.a)(),name:n,url:t})})),g(a),c(i)}))}))}else console.log("File selected"),console.log("".concat(t.files[0].url)),console.log("Selected Media player: ".concat(b.value)),fetch("/ha/cast",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({player_entity_id:b.value,url:t.files[0].url})}).then((function(e){return e.text()})).then((function(e){return null}))}else if("open_files"===e.id){var r=t.target.id;console.log(r);var h=s.findIndex((function(e){return e.id===r}));if(-1===h)return;console.log(h),"/"===(l=s[h].path)&&(l=""),console.log(l);var f=s.slice(0,h+1);console.log(f);var m=[];fetch("/api/directories"+l).then((function(e){return e.json()})).then((function(e){if(e.map((function(e){var t=e.full,n=e.short;m.push({id:Object(p.a)(),name:n,isDir:!0,url:t})})),""===l)return g(f),void c(m);fetch("/api/files"+l).then((function(e){return e.json()})).then((function(e){e.map((function(e){var t=e.full,n=e.short;m.push({id:Object(p.a)(),name:n,url:t})})),g(f),c(m)}))}))}console.log(e),console.log(t)},disableDefaultFileActions:!0,fileActions:j},a.a.createElement(f.FileToolbar,null),a.a.createElement(f.FileSearch,null),a.a.createElement(f.FileList,null)))},E=n(410),b=n(412),v=n(409),j=n(154);var O=function(){var e=Object(o.useState)(""),t=Object(h.a)(e,2),n=t[0],l=t[1],c=Object(o.useState)([]),i=Object(h.a)(c,2),r=i[0],s=i[1],d=Object(o.useState)(""),y=Object(h.a)(d,2),O=y[0],C=y[1],S=Object(o.useState)(null),A=Object(h.a)(S,2),F=A[0],k=A[1],w=Object(o.useState)([]),T=Object(h.a)(w,2),P=T[0],D=T[1];Object(o.useEffect)((function(){var e;fetch("/playlists/playlists").then((function(e){return e.json()})).then((function(t){console.log(t),0!==t.length&&(e=t.map((function(e){return{value:e,label:e}})),s(e),fetch("/playlists/currentplaylist").then((function(e){return e.text()})).then((function(t){""===t?(console.log("selection about to change: empty"),console.log(e),C({value:e[0].value,label:e[0].value})):(console.log("selection about to change:"),C({value:t,label:t})),console.log(t)})))}))}),[]),Object(o.useEffect)((function(){console.log("use effect:"),console.log(O),""!==O&&"null"!=O&&fetch("/playlists/currentplaylist/"+O.value,{method:"post"}).then((function(e){return e.text()})).then((function(e){fetch("/playlists/currentplaylist/files").then((function(e){return e.json()})).then((function(e){D(e)}))}))}),[O]);var I=Object(o.useState)([]),N=Object(h.a)(I,2),L=N[0],x=N[1],B=Object(o.useState)([{id:Object(p.a)(),name:"Network Shares",path:"/"}]),R=Object(h.a)(B,2),U=R[0],Y=R[1];Object(o.useEffect)((function(){g="",fetch("/api/directories").then((function(e){return e.json()})).then((function(e){var t=[];e.map((function(e){var n=e.short;t.push({id:Object(p.a)(),name:n,isDir:!0})})),x(t)}))}),[]);var _=[f.ChonkyActions.ChangeSelection,f.ChonkyActions.OpenParentFolder,{id:f.ChonkyActions.OpenFiles.id},f.ChonkyActions.ToggleSearch,f.ChonkyActions.SortFilesByName,f.ChonkyActions.SortFilesBySize,f.ChonkyActions.SortFilesByDate,f.ChonkyActions.ToggleShowFoldersFirst];function M(e){var t,n=e.index,l=e.style;return a.a.createElement(E.a,{button:!0,style:l,key:n},a.a.createElement(b.a,{primary:(t=P[n],new String(t).substring(t.lastIndexOf("/")+1))}))}return a.a.createElement("div",{className:"App"},a.a.createElement("h2",null,"Playlists Page"),a.a.createElement("p",null,a.a.createElement("h2",null,"Create Playlist"),a.a.createElement(v.a,{name:"createplaylist",label:"Create Playlist",variant:"outlined",onChange:function(e){return l(e.target.value)}})," ",a.a.createElement("p",null,a.a.createElement("button",{onClick:function(){console.log("Create playlist"),console.log(n),fetch("/playlists/create/".concat(n)).then((function(e){return e.text()})).then((function(e){"True"===e&&(s([].concat(Object(u.a)(r),[{value:n,label:n}])),C({value:n,label:n}))}))}},"CREATE PLAYLIST"))),a.a.createElement("p",null,a.a.createElement("h2",null,"OR Select Existing Playlist"),a.a.createElement(m.a,{name:"existingplaylists",value:O,onChange:C,options:r})),a.a.createElement("p",null,a.a.createElement("h2",null,"Add Folder to Playlist"),a.a.createElement("p",null,"1. Choose folders from below"),a.a.createElement("p",null,"2. Single click to select, double-click to open folder "),a.a.createElement("p",null,"3. You can select multiple folders at once using shift or ctrl key"),a.a.createElement("p",null,"4. Add selection to playlist. You can do this multiple times. "),a.a.createElement("p",null,"CURRENT PLAYLIST: ",null!=O?O.value:""),a.a.createElement("p",null,"PLAYLIST ITEMS COUNT: ",P.length," "),a.a.createElement("p",null,a.a.createElement("a",{href:"#viewplaylist"},"View Playlist")),a.a.createElement("p",null,a.a.createElement("button",{onClick:function(){console.log(F),fetch("/playlists/addfolder",{method:"post",body:JSON.stringify(F),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return console.log(e)}))}},"ADD SELECTION TO PLAYLIST")),a.a.createElement(f.FileBrowser,{files:L,folderChain:U,onFileAction:function(e,t){if("open_files"===e.id){if(console.log("OPEN FILES"),k(null),console.log(t),void 0===t.files[0])return;var n,l=t.files[0];if(n=l.name,l.isDir){n=decodeURIComponent(decodeURIComponent(n)),g=g+"/"+n,console.log("Directory selected: ".concat(n)),console.log("Current Path: ".concat(g));var o,a=[];o=[].concat(Object(u.a)(U),[{id:Object(p.a)(),name:n,path:g}]),console.log("Newfolderchain: ".concat(o)),fetch("/api/directories"+g).then((function(e){return e.json()})).then((function(e){e.map((function(e){var t=e.full,n=e.short;a.push({id:Object(p.a)(),name:n,isDir:!0,url:t})})),fetch("/api/files"+g).then((function(e){return e.json()})).then((function(e){e.map((function(e){var t=e.full,n=e.short;a.push({id:Object(p.a)(),name:n,url:t})})),Y(o),x(a)}))}))}else{var c=t.target.id;console.log(c),console.log(t),console.log(U);var i=t.files[0];n=i.name,i.isDir;var r=U.findIndex((function(e){return e.id===c}));if(-1===r)return;console.log(r),"/"===(g=U[r].path)&&(g=""),console.log(g);var s=U.slice(0,r+1);console.log(s);var h=[];fetch("/api/directories"+g).then((function(e){return e.json()})).then((function(e){if(e.map((function(e){var t=e.full,n=e.short;h.push({id:Object(p.a)(),name:n,isDir:!0,url:t})})),""===g)return Y(s),void x(h);fetch("/api/files"+g).then((function(e){return e.json()})).then((function(e){e.map((function(e){var t=e.full,n=e.short;h.push({id:Object(p.a)(),name:n,url:t})})),Y(s),x(h)}))}))}}else"change_selection"===e.id&&t.files.length>0&&(console.log("CHANGE SELECTED"),k(t.files));console.log(e),console.log(t)},disableDefaultFileActions:!0,fileActions:_},a.a.createElement(f.FileToolbar,null),a.a.createElement(f.FileSearch,null),a.a.createElement(f.FileList,null))),a.a.createElement("p",null,a.a.createElement("h2",{id:"viewplaylist"},"Current Playlist"),a.a.createElement(j.a,{height:400,width:300,itemSize:46,itemCount:P.length},M)))};var C=function(){return a.a.createElement(r.a,null,a.a.createElement(s.c,null,a.a.createElement(s.a,{path:"/cast",element:a.a.createElement(y,null)}),a.a.createElement(s.a,{path:"/playlists",element:a.a.createElement(O,null)})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[164,1,2]]]);
//# sourceMappingURL=main.b018991e.chunk.js.map